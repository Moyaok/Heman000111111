<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ - HOME KEA</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="enhanced-style.css">
    <link rel="icon" type="image/png" href="image/logo1.png">

    <style>
        /* ===================================
           CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° FLOATING CART
           =================================== */
        
        .floating-cart {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .floating-cart:hover {
            transform: scale(1.1);
        }
        
        .floating-cart-button {
            background-color: #ff9800;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .floating-cart-icon {
            font-size: 24px;
        }
        
        .floating-cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: red;
            color: white;
            font-size: 12px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            border: 2px solid white;
        }
        /* Animation */
        
        .floating-cart.item-added {
            animation: bounce 0.5s;
        }
        
        @keyframes bounce {
            0%,
            100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }
        /* ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πâ‡∏≤‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á (Optional) */
        
        .floating-cart.empty-cart {
            display: none;
        }
    </style>
</head>

<body>

    <header class="navbar">
        <a href="index.html" class="logo">
            <img src="image/logo1.png" alt="HOME KEA Logo">
        </a>
        <nav>
            <a href="living-room.html">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô</a>
            <a href="bedroom.html">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô</a>
            <a href="kitchen.html">‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ß</a>
            <a href="contact.html">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
            <div class="cart-icon-wrapper" onclick="goToCart()">
                <span class="cart-icon">üõí</span>
                <span class="cart-badge" id="navbarCartBadge">0</span>
            </div>
        </nav>
    </header>

    <div class="breadcrumb">
        <a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a> /
        <span>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
    </div>

    <main>
        <section class="page-header">
            <h1>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h1>
            <p id="cartItemCount">‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ 0 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤</p>
        </section>

        <div class="cart-container">
            <div id="cartContent">
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>copyright &copy; Pongsakorn Manosri&Yannapat Saritdikul</p>
        </div>
    </footer>

    <div class="floating-cart" onclick="goToCart()" role="button" aria-label="‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
        <div class="floating-cart-button">
            <span class="floating-cart-icon">üõí</span>
            <span class="floating-cart-badge" id="floatingCartBadge">0</span>
        </div>
    </div>

    <script src="cart.js"></script>
    <script>
        // ===================================
        // CART PAGE LOGIC
        // ===================================

        function renderCart() {
            const cartContent = document.getElementById('cartContent');

            // ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤ cart object ‡πÇ‡∏´‡∏•‡∏î‡∏°‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            if (typeof cart === 'undefined') {
                console.error("cart.js ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏•‡∏î");
                return;
            }

            const itemCount = cart.getItemCount();

            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠
            document.getElementById('cartItemCount').textContent = `‡∏Ñ‡∏∏‡∏ì‡∏°‡∏µ ${itemCount} ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤`;

            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Badge ‡∏ó‡∏µ‡πà Navbar ‡∏î‡πâ‡∏ß‡∏¢
            const navBadge = document.getElementById('navbarCartBadge');
            if (navBadge) navBadge.textContent = itemCount;

            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Floating Badge
            updateFloatingCart();

            // ‡∏Å‡∏£‡∏ì‡∏µ‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á
            if (cart.items.length === 0) {
                cartContent.innerHTML = `
                    <div class="empty-cart">
                        <div class="empty-cart-icon" style="font-size: 80px; margin-bottom: 20px;">üõí</div>
                        <h2>‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏õ‡∏•‡πà‡∏≤</h2>
                        <p>‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á‡πÅ‡∏•‡∏∞‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Å‡∏±‡∏ô‡πÄ‡∏•‡∏¢!</p>
                        <a href="index.html" class="cta-button" style="display: inline-block; margin-top: 20px; text-decoration: none;">
                            ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ä‡πâ‡∏≠‡∏õ‡∏õ‡∏¥‡πâ‡∏á
                        </a>
                    </div>
                `;
                return;
            }

            // ‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
            const cartGrid = document.createElement('div');
            cartGrid.className = 'cart-grid';

            // ‡∏™‡πà‡∏ß‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ (Left Side)
            const cartItems = document.createElement('div');
            cartItems.className = 'cart-items';
            cartItems.innerHTML = '<h2>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h2>';

            cart.items.forEach(item => {
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <img src="${item.image}" alt="${item.title}" class="cart-item-image">
                    <div class="cart-item-info">
                        <h3>${item.title}</h3>
                        <p class="cart-item-category">${item.category}</p>
                    </div>
                    <div class="cart-item-price">${item.price.toLocaleString()} ‡∏ø</div>
                    <div class="quantity-controls">
                        <button class="qty-btn" onclick="updateItemQuantity('${item.id}', ${item.quantity - 1})">-</button>
                        <input type="number" class="qty-input" value="${item.quantity}" readonly>
                        <button class="qty-btn" onclick="updateItemQuantity('${item.id}', ${item.quantity + 1})">+</button>
                    </div>
                    <button class="remove-btn" onclick="removeItemFromCart('${item.id}')">‡∏•‡∏ö</button>
                `;
                cartItems.appendChild(cartItem);
            });

            // ‡∏™‡πà‡∏ß‡∏ô‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡πÄ‡∏á‡∏¥‡∏ô (Right Side)
            const cartSummary = document.createElement('div');
            cartSummary.className = 'cart-summary';

            const subtotal = cart.getTotal();
            const shipping = subtotal >= 5000 ? 0 : 150;
            const total = subtotal + shipping;

            cartSummary.innerHTML = `
                <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
                <div class="summary-row">
                    <span>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                    <span>${subtotal.toLocaleString()} ‡∏ø</span>
                </div>
                <div class="summary-row">
                    <span>‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</span>
                    <span>${shipping === 0 ? '‡∏ü‡∏£‡∏µ' : shipping.toLocaleString() + ' ‡∏ø'}</span>
                </div>
                ${shipping === 0 ? '' : `
                    <p style="font-size: 0.9em; color: #666; margin: 10px 0;">
                        üí° ‡∏ã‡∏∑‡πâ‡∏≠‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏µ‡∏Å ${(5000 - subtotal).toLocaleString()} ‡∏ø ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏™‡πà‡∏á‡∏ü‡∏£‡∏µ!
                    </p>
                `}
                <div class="summary-row total">
                    <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                    <span>${total.toLocaleString()} ‡∏ø</span>
                </div>
                <button class="cta-button checkout-btn" onclick="proceedToCheckout()">
                    ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
                </button>
                <button class="cta-button checkout-btn" onclick="continueShopping()" 
                    style="background-color: white; color: var(--primary-blue); border: 2px solid var(--primary-blue); margin-top: 10px;">
                    ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ï‡πà‡∏≠
                </button>
            `;

            cartGrid.appendChild(cartItems);
            cartGrid.appendChild(cartSummary);
            cartContent.innerHTML = ''; // Clear loading state
            cartContent.appendChild(cartGrid);
        }

        // Functions ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤
        function updateItemQuantity(productId, newQuantity) {
            if (newQuantity < 1) {
                if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                    cart.removeItem(productId);
                    renderCart();
                }
            } else {
                cart.updateQuantity(productId, newQuantity);
                renderCart();
            }
        }

        function removeItemFromCart(productId) {
            if (confirm('‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                cart.removeItem(productId);
                renderCart();
            }
        }

        function proceedToCheckout() {
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏´‡∏ô‡πâ‡∏≤ checkout.html ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
            window.location.href = 'checkout.html';
        }

        function continueShopping() {
            window.location.href = 'index.html';
        }

        // ===================================
        // FLOATING CART LOGIC
        // ===================================
        function updateFloatingCart() {
            const badge = document.getElementById('floatingCartBadge');
            const floatingCart = document.querySelector('.floating-cart');

            if (typeof cart !== 'undefined' && badge) {
                const count = cart.getItemCount();
                badge.textContent = count;
                
                if (count > 0) {
                    badge.style.display = 'flex';
                    floatingCart.classList.remove('empty-cart');
                } else {
                    badge.style.display = 'none';
                    // floatingCart.classList.add('empty-cart');
                }
            }
        }

        // Override goToCart ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ Scroll to top ‡πÅ‡∏ó‡∏ô
        // ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏£‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤ cart ‡πÅ‡∏•‡πâ‡∏ß ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á refresh ‡∏´‡∏£‡∏∑‡∏≠ link ‡∏ã‡πâ‡∏≥
        window.goToCart = function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderCart();
        });
    </script>
</body>

</html>