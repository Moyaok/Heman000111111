<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ - HOME KEA</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="enhanced-style.css">
    <link rel="icon" type="image/png" href="image/logo1.png">

    <style>
        /* ===================================
           CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° FLOATING CART
           (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏≠‡∏¢‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡∏°‡∏∏‡∏°‡∏Ç‡∏ß‡∏≤‡∏•‡πà‡∏≤‡∏á)
           =================================== */
        
        .floating-cart {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .floating-cart:hover {
            transform: scale(1.1);
        }
        
        .floating-cart-button {
            background-color: #ff9800;
            /* ‡∏™‡∏µ‡∏õ‡∏∏‡πà‡∏° (‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏° Theme) */
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .floating-cart-icon {
            font-size: 24px;
        }
        
        .floating-cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: red;
            color: white;
            font-size: 12px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            border: 2px solid white;
        }
        /* Animation ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Å‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ */
        
        .floating-cart.item-added {
            animation: bounce 0.5s;
        }
        
        @keyframes bounce {
            0%,
            100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.2);
            }
        }
        /* Tooltip ‡πÅ‡∏•‡∏∞ Preview (Optional - ‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πà‡∏≠‡∏ô‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ CSS ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö) */
        
        .floating-cart-tooltip,
        .floating-cart-preview {
            display: none;
            /* ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ */
        }
        /* ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πâ‡∏≤‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£) */
        
        .floating-cart.empty-cart {
            display: none;
            /* ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô opacity: 0.5; */
        }
    </style>
</head>

<body>

    <header class="navbar">
        <a href="index.html" class="logo">
            <img src="image/logo1.png" alt="HOME KEA Logo">
        </a>
        <nav>
            <a href="living-room.html">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô</a>
            <a href="bedroom.html">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô</a>
            <a href="kitchen.html">‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ß</a>
            <a href="contact.html">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
            <div class="cart-icon-wrapper" onclick="goToCart()">
                <span class="cart-icon">üõí</span>
                <span class="cart-badge">0</span>
            </div>
        </nav>
    </header>

    <div class="breadcrumb">
        <a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a> /
        <a href="#" id="categoryLink">‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</a> /
        <span id="productBreadcrumb">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
    </div>

    <main>
        <div class="product-detail-container">
            <div class="product-detail-grid">
                <div class="product-gallery">
                    <img id="mainImage" class="main-image" src="" alt="Product Image" onclick="zoomImage(this)">
                    <div class="thumbnail-list" id="thumbnailList">
                    </div>
                </div>

                <div class="product-details">
                    <h1 class="product-detail-title" id="productTitle">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</h1>

                    <div class="product-rating">
                        <div class="stars" id="productStars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                        <span class="rating-count" id="ratingCount">(0 ‡∏£‡∏µ‡∏ß‡∏¥‡∏ß)</span>
                    </div>

                    <p class="product-detail-price" id="productPrice">0 ‡∏ø</p>

                    <div class="product-description" id="productDescription">
                        <h3>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</h3>
                        <p>‡πÄ‡∏ü‡∏≠‡∏£‡πå‡∏ô‡∏¥‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á ‡∏ú‡∏•‡∏¥‡∏ï‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏ä‡∏±‡πâ‡∏ô‡∏î‡∏µ ‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡∏ó‡∏±‡∏ô‡∏™‡∏°‡∏±‡∏¢ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏™‡πÑ‡∏ï‡∏•‡πå‡∏Å‡∏≤‡∏£‡∏ï‡∏∞‡πÅ‡∏ï‡πà‡∏á‡∏ö‡πâ‡∏≤‡∏ô</p>
                        <ul>
                            <li>‡∏ß‡∏±‡∏™‡∏î‡∏∏‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏™‡∏π‡∏á ‡∏ó‡∏ô‡∏ó‡∏≤‡∏ô</li>
                            <li>‡∏î‡∏µ‡πÑ‡∏ã‡∏ô‡πå‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏° ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Å‡∏≤‡∏•‡πÄ‡∏ß‡∏•‡∏≤</li>
                            <li>‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏±‡∏Å‡∏©‡∏≤</li>
                            <li>‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤ 1 ‡∏õ‡∏µ</li>
                        </ul>
                    </div>

                    <div class="quantity-selector">
                        <label>‡∏à‡∏≥‡∏ô‡∏ß‡∏ô:</label>
                        <div class="quantity-controls">
                            <button class="qty-btn" onclick="decreaseQuantity()">-</button>
                            <input type="number" class="qty-input" id="quantity" value="1" min="1" readonly>
                            <button class="qty-btn" onclick="increaseQuantity()">+</button>
                        </div>
                    </div>

                    <button class="cta-button" onclick="addToCartFromDetail()" style="width: 100%;">
                        ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                    </button>
                </div>
            </div>
        </div>

        <section class="reviews-section">
            <div class="reviews-header">
                <h2>‡∏£‡∏µ‡∏ß‡∏¥‡∏ß‡∏à‡∏≤‡∏Å‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>
            </div>
            <div id="reviewsList">
                <div class="review-card">
                    <div class="review-header">
                        <span class="reviewer-name">‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ</span>
                        <span class="review-date">15 ‡∏û.‡∏¢. 2024</span>
                    </div>
                    <div class="review-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="review-text">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏î‡∏µ‡∏°‡∏≤‡∏Å ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏° ‡∏™‡πà‡∏á‡πÑ‡∏ß‡∏°‡∏≤‡∏Å ‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô‡πÉ‡∏´‡πâ‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏î‡∏µ‡∏Ñ‡∏£‡∏±‡∏ö</p>
                </div>
                <div class="review-card">
                    <div class="review-header">
                        <span class="reviewer-name">‡∏ß‡∏¥‡πÑ‡∏•‡∏ß‡∏£‡∏£‡∏ì ‡∏™‡∏∏‡∏Ç‡πÉ‡∏à</span>
                        <span class="review-date">10 ‡∏û.‡∏¢. 2024</span>
                    </div>
                    <div class="review-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÜ</div>
                    <p class="review-text">‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏™‡∏ß‡∏¢‡∏î‡∏µ ‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏Ñ‡∏≤‡∏î‡∏´‡∏ß‡∏±‡∏á ‡πÅ‡∏ï‡πà‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á‡∏ä‡πâ‡∏≤‡πÑ‡∏õ‡∏ô‡∏¥‡∏î‡∏Ñ‡πà‡∏∞</p>
                </div>
                <div class="review-card">
                    <div class="review-header">
                        <span class="reviewer-name">‡∏õ‡∏£‡∏∞‡∏¢‡∏∏‡∏ó‡∏ò‡πå ‡∏°‡∏±‡πà‡∏ô‡∏Ñ‡∏á</span>
                        <span class="review-date">5 ‡∏û.‡∏¢. 2024</span>
                    </div>
                    <div class="review-rating">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</div>
                    <p class="review-text">‡∏õ‡∏£‡∏∞‡∏ó‡∏±‡∏ö‡πÉ‡∏à‡∏°‡∏≤‡∏Å ‡∏£‡∏≤‡∏Ñ‡∏≤‡∏î‡∏µ ‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏î‡∏µ ‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏á‡πà‡∏≤‡∏¢ ‡∏à‡∏∞‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏ã‡∏∑‡πâ‡∏≠‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>copyright &copy; Pongsakorn Manosri&Yannapat Saritdikul</p>
        </div>
    </footer>

    <div class="floating-cart" onclick="goToCart()" role="button" aria-label="‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤" tabindex="0" onkeypress="handleCartKeyPress(event)">
        <div class="floating-cart-button">
            <span class="floating-cart-icon">üõí</span>
            <span class="floating-cart-badge" id="floatingCartBadge">0</span>
        </div>

        <div class="floating-cart-preview" id="floatingCartPreview" style="display:none;">
            <span id="previewTotal">0</span>
        </div>
    </div>

    <script src="cart.js"></script>
    <script>
        // ===================================
        // PRODUCT PAGE LOGIC
        // ===================================
        const urlParams = new URLSearchParams(window.location.search);
        const productData = {
            id: urlParams.get('id') || 'product-1',
            title: urlParams.get('title') || '‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',
            price: parseFloat(urlParams.get('price')) || 0,
            image: urlParams.get('image') || 'https://via.placeholder.com/500',
            category: urlParams.get('category') || '‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ'
        };

        // Render UI
        document.getElementById('productTitle').textContent = productData.title;
        document.getElementById('productPrice').textContent = productData.price.toLocaleString() + ' ‡∏ø';
        document.getElementById('mainImage').src = productData.image;
        document.getElementById('productBreadcrumb').textContent = productData.title;

        // Category Link
        const categoryMap = {
            '‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô': 'living-room.html',
            '‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô': 'bedroom.html',
            '‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ß': 'kitchen.html'
        };
        const categoryLink = document.getElementById('categoryLink');
        categoryLink.textContent = productData.category;
        categoryLink.href = categoryMap[productData.category] || 'index.html';

        // Create Thumbnails
        const thumbnailList = document.getElementById('thumbnailList');
        for (let i = 0; i < 3; i++) {
            const thumb = document.createElement('img');
            thumb.src = productData.image;
            thumb.className = 'thumbnail' + (i === 0 ? ' active' : '');
            thumb.onclick = function() {
                document.getElementById('mainImage').src = this.src;
                document.querySelectorAll('.thumbnail').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
            };
            thumbnailList.appendChild(thumb);
        }

        // Quantity Logic
        function increaseQuantity() {
            const qtyInput = document.getElementById('quantity');
            qtyInput.value = parseInt(qtyInput.value) + 1;
        }

        function decreaseQuantity() {
            const qtyInput = document.getElementById('quantity');
            if (parseInt(qtyInput.value) > 1) {
                qtyInput.value = parseInt(qtyInput.value) - 1;
            }
        }

        // Zoom Logic
        function zoomImage(img) {
            const modal = document.createElement('div');
            modal.style.cssText = `
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background: rgba(0,0,0,0.9); display: flex; align-items: center;
                justify-content: center; z-index: 10000; cursor: zoom-out;
            `;
            const zoomedImg = document.createElement('img');
            zoomedImg.src = img.src;
            zoomedImg.style.cssText = 'max-width: 90%; max-height: 90%; object-fit: contain;';
            modal.appendChild(zoomedImg);
            modal.onclick = () => modal.remove();
            document.body.appendChild(modal);
        }

        // ===================================
        // CART INTEGRATION LOGIC
        // ===================================

        // 1. Add to Cart from Button
        function addToCartFromDetail() {
            const quantity = parseInt(document.getElementById('quantity').value);
            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô addToCart ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà (‡∏°‡∏≤‡∏à‡∏≤‡∏Å cart.js)
            if (typeof addToCart === 'function') {
                for (let i = 0; i < quantity; i++) {
                    addToCart(
                        productData.id,
                        productData.title,
                        productData.price,
                        productData.image,
                        productData.category
                    );
                }
            } else {
                console.error("cart.js not loaded or addToCart function missing");
                alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î: ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡πÑ‡∏î‡πâ");
            }
        }

        // 2. Floating Cart Update Logic
        function updateFloatingCart() {
            const badge = document.getElementById('floatingCartBadge');
            const floatingCart = document.querySelector('.floating-cart');

            // ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤ cart object ‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡∏à‡∏£‡∏¥‡∏á
            if (typeof cart !== 'undefined' && badge) {
                const count = cart.getItemCount ? cart.getItemCount() : 0;

                badge.textContent = count;

                // Toggle visibility based on count
                if (count > 0) {
                    badge.style.display = 'flex';
                    floatingCart.classList.remove('empty-cart');
                } else {
                    badge.style.display = 'none';
                    // floatingCart.classList.add('empty-cart'); // Uncomment ‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏≤‡∏Å‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ï‡∏≠‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡∏≠‡∏á
                }
            }
        }

        // 3. Animation Logic
        function animateFloatingCart() {
            const floatingCart = document.querySelector('.floating-cart');
            if (floatingCart) {
                floatingCart.classList.add('item-added');
                setTimeout(() => {
                    floatingCart.classList.remove('item-added');
                }, 500);
            }
        }

        // 4. Override addToCart to add animation (Safety Wrapper)
        const originalAddToCart = window.addToCart;
        window.addToCart = function(id, title, price, img, cat) {
            if (originalAddToCart) {
                originalAddToCart(id, title, price, img, cat);
                animateFloatingCart();
                updateFloatingCart();
            }
        };

        // 5. Override goToCart for Smooth Scroll
        const originalGoToCart = window.goToCart;
        window.goToCart = function() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
            setTimeout(() => {
                if (typeof originalGoToCart === 'function') {
                    originalGoToCart(); // ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ cart.html (‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà cart.js ‡∏Å‡∏≥‡∏´‡∏ô‡∏î)
                } else {
                    window.location.href = 'cart.html'; // Fallback
                }
            }, 300);
        };

        // 6. Keyboard Handler
        function handleCartKeyPress(event) {
            if (event.key === 'Enter' || event.key === ' ') {
                event.preventDefault();
                goToCart();
            }
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            updateFloatingCart();
            // ‡πÄ‡∏ä‡πá‡∏Ñ update ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏∑‡πà‡∏ô (‡∏ú‡πà‡∏≤‡∏ô localStorage)
            setInterval(updateFloatingCart, 1000);
        });
    </script>
</body>

</html>