<!DOCTYPE html>
<html lang="th">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô - HOME KEA</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="enhanced-style.css">
    <link rel="icon" type="image/png" href="image/logo1.png">
    <style>
        /* ===================================
           CSS ‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡∏ô‡πâ‡∏≤ Checkout
           =================================== */
        
        .checkout-container {
            max-width: 1200px;
            margin: 30px auto;
            padding: 0 30px;
        }
        
        .checkout-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }
        
        .checkout-form {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .form-section h3 {
            color: var(--primary-blue);
            border-bottom: 2px solid var(--accent-yellow);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: var(--text-dark);
        }
        
        .form-group input,
        .form-group select,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border-color);
            border-radius: 5px;
            font-size: 1em;
            box-sizing: border-box;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .payment-methods {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        
        .payment-option {
            border: 2px solid var(--border-color);
            padding: 15px;
            border-radius: 8px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s;
        }
        
        .payment-option:hover {
            border-color: var(--primary-blue);
        }
        
        .payment-option.selected {
            border-color: var(--accent-yellow);
            background-color: #fffbf0;
        }
        
        .payment-option input[type="radio"] {
            margin-right: 8px;
        }
        
        .order-summary {
            background-color: white;
            padding: 30px;
            border-radius: 8px;
            border: 1px solid var(--border-color);
            height: fit-content;
        }
        
        .summary-item {
            display: flex;
            gap: 15px;
            padding: 15px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .summary-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
        }
        
        .summary-item-info {
            flex: 1;
        }
        
        .summary-item-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .summary-item-qty {
            color: #666;
            font-size: 0.9em;
        }
        
        .summary-item-price {
            font-weight: bold;
            color: var(--accent-yellow);
        }
        
        @media (max-width: 768px) {
            .checkout-grid {
                grid-template-columns: 1fr;
            }
            .form-row {
                grid-template-columns: 1fr;
            }
            .payment-methods {
                grid-template-columns: 1fr;
            }
        }
        /* ===================================
           CSS ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏∏‡πà‡∏° FLOATING CART
           =================================== */
        
        .floating-cart {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 1000;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .floating-cart:hover {
            transform: scale(1.1);
        }
        
        .floating-cart-button {
            background-color: #ff9800;
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            position: relative;
        }
        
        .floating-cart-icon {
            font-size: 24px;
        }
        
        .floating-cart-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: red;
            color: white;
            font-size: 12px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            border: 2px solid white;
        }
        /* ‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πâ‡∏≤‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏ß‡πà‡∏≤‡∏á */
        
        .floating-cart.empty-cart {
            display: none;
        }
    </style>
</head>

<body>

    <header class="navbar">
        <a href="index.html" class="logo">
            <img src="image/logo1.png" alt="HOME KEA Logo">
        </a>
        <nav>
            <a href="living-room.html">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πà‡∏á‡πÄ‡∏•‡πà‡∏ô</a>
            <a href="bedroom.html">‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏≠‡∏ô</a>
            <a href="kitchen.html">‡∏´‡πâ‡∏≠‡∏á‡∏Ñ‡∏£‡∏±‡∏ß</a>
            <a href="contact.html">‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠‡πÄ‡∏£‡∏≤</a>
            <div class="cart-icon-wrapper" onclick="goToCart()">
                <span class="cart-icon">üõí</span>
                <span class="cart-badge" id="navbarCartBadge">0</span>
            </div>
        </nav>
    </header>

    <div class="breadcrumb">
        <a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a> /
        <a href="cart.html">‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</a> /
        <span>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</span>
    </div>

    <main>
        <section class="page-header">
            <h1>‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h1>
            <p>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</p>
        </section>

        <div class="checkout-container">
            <div class="checkout-grid">
                <div class="checkout-form">
                    <form id="checkoutForm">
                        <div class="form-section">
                            <h3>‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="firstName">‡∏ä‡∏∑‡πà‡∏≠ *</label>
                                    <input type="text" id="firstName" required>
                                </div>
                                <div class="form-group">
                                    <label for="lastName">‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏• *</label>
                                    <input type="text" id="lastName" required>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå *</label>
                                <input type="tel" id="phone" required>
                            </div>
                            <div class="form-group">
                                <label for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏• *</label>
                                <input type="email" id="email" required>
                            </div>
                            <div class="form-group">
                                <label for="address">‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà *</label>
                                <textarea id="address" rows="3" required></textarea>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="province">‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î *</label>
                                    <select id="province" required>
                                        <option value="">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</option>
                                        <option value="‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£">‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏°‡∏´‡∏≤‡∏ô‡∏Ñ‡∏£</option>
                                        <option value="‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà">‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</option>
                                        <option value="‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï">‡∏†‡∏π‡πÄ‡∏Å‡πá‡∏ï</option>
                                        <option value="‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô">‡∏Ç‡∏≠‡∏ô‡πÅ‡∏Å‡πà‡∏ô</option>
                                        <option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="postalCode">‡∏£‡∏´‡∏±‡∏™‡πÑ‡∏õ‡∏£‡∏©‡∏ì‡∏µ‡∏¢‡πå *</label>
                                    <input type="text" id="postalCode" required>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
                            <div class="payment-methods">
                                <div class="payment-option selected" onclick="selectPayment('credit')">
                                    <input type="radio" name="payment" value="credit" checked>
                                    <label>üí≥ ‡∏ö‡∏±‡∏ï‡∏£‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï/‡πÄ‡∏î‡∏ö‡∏¥‡∏ï</label>
                                </div>
                                <div class="payment-option" onclick="selectPayment('promptpay')">
                                    <input type="radio" name="payment" value="promptpay">
                                    <label>üì± ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏¢‡πå</label>
                                </div>
                                <div class="payment-option" onclick="selectPayment('bank')">
                                    <input type="radio" name="payment" value="bank">
                                    <label>üè¶ ‡πÇ‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</label>
                                </div>
                                <div class="payment-option" onclick="selectPayment('cod')">
                                    <input type="radio" name="payment" value="cod">
                                    <label>üíµ ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</label>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)</h3>
                            <div class="form-group">
                                <textarea id="notes" rows="3" placeholder="‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ñ‡∏∂‡∏á‡∏ú‡∏π‡πâ‡∏Ç‡∏≤‡∏¢..."></textarea>
                            </div>
                        </div>

                        <button type="submit" class="cta-button" style="width: 100%;">
                            ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
                        </button>
                    </form>
                </div>

                <div class="order-summary">
                    <h2>‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
                    <div id="summaryItems"></div>
                    <div class="summary-row" style="margin-top: 20px;">
                        <span>‡∏£‡∏≤‡∏Ñ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤</span>
                        <span id="summarySubtotal">0 ‡∏ø</span>
                    </div>
                    <div class="summary-row">
                        <span>‡∏Ñ‡πà‡∏≤‡∏à‡∏±‡∏î‡∏™‡πà‡∏á</span>
                        <span id="summaryShipping">0 ‡∏ø</span>
                    </div>
                    <div class="summary-row total">
                        <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</span>
                        <span id="summaryTotal">0 ‡∏ø</span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="site-footer">
        <div class="container">
            <p>copyright &copy; Pongsakorn Manosri&Yannapat Saritdikul</p>
        </div>
    </footer>

    <div class="floating-cart" onclick="goToCart()" role="button" aria-label="‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤">
        <div class="floating-cart-button">
            <span class="floating-cart-icon">üõí</span>
            <span class="floating-cart-badge" id="floatingCartBadge">0</span>
        </div>
    </div>

    <script src="cart.js"></script>
    <script>
        // ===================================
        // CHECKOUT PAGE LOGIC
        // ===================================

        // 1. ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏°‡∏µ‡∏™‡∏¥‡∏ô‡∏Ñ‡πâ‡∏≤‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
        if (!cart || cart.items.length === 0) {
            window.location.href = 'cart.html';
        }

        // 2. ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
        function renderOrderSummary() {
            const summaryItems = document.getElementById('summaryItems');
            if (!summaryItems) return;

            summaryItems.innerHTML = '';

            // ‡∏≠‡∏±‡∏û‡πÄ‡∏î‡∏ó Badge ‡∏ó‡∏µ‡πà Navbar ‡πÅ‡∏•‡∏∞ Floating Button
            const navBadge = document.getElementById('navbarCartBadge');
            if (navBadge) navBadge.textContent = cart.getItemCount();
            updateFloatingCart();

            cart.items.forEach(item => {
                const itemDiv = document.createElement('div');
                itemDiv.className = 'summary-item';
                itemDiv.innerHTML = `
                    <img src="${item.image}" alt="${item.title}">
                    <div class="summary-item-info">
                        <div class="summary-item-title">${item.title}</div>
                        <div class="summary-item-qty">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô: ${item.quantity}</div>
                    </div>
                    <div class="summary-item-price">${(item.price * item.quantity).toLocaleString()} ‡∏ø</div>
                `;
                summaryItems.appendChild(itemDiv);
            });

            const subtotal = cart.getTotal();
            const shipping = subtotal >= 5000 ? 0 : 150;
            const total = subtotal + shipping;

            document.getElementById('summarySubtotal').textContent = subtotal.toLocaleString() + ' ‡∏ø';
            document.getElementById('summaryShipping').textContent = shipping === 0 ? '‡∏ü‡∏£‡∏µ' : shipping.toLocaleString() + ' ‡∏ø';
            document.getElementById('summaryTotal').textContent = total.toLocaleString() + ' ‡∏ø';
        }

        // 3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô
        function selectPayment(method) {
            document.querySelectorAll('.payment-option').forEach(option => {
                option.classList.remove('selected');
            });
            // ‡πÉ‡∏ä‡πâ event.currentTarget ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥ ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏≤ element ‡∏à‡∏≤‡∏Å onclick
            const selectedOption = document.querySelector(`.payment-option input[value="${method}"]`).parentElement;
            if (selectedOption) selectedOption.classList.add('selected');

            document.querySelector(`input[value="${method}"]`).checked = true;
        }

        // 4. ‡∏™‡πà‡∏á‡∏ü‡∏≠‡∏£‡πå‡∏° (Submit)
        document.getElementById('checkoutForm').addEventListener('submit', function(e) {
            e.preventDefault();

            const submitBtn = e.target.querySelector('button[type="submit"]');
            submitBtn.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£...';
            submitBtn.disabled = true;

            setTimeout(() => {
                const orderData = {
                    customer: {
                        firstName: document.getElementById('firstName').value,
                        lastName: document.getElementById('lastName').value,
                        phone: document.getElementById('phone').value,
                        email: document.getElementById('email').value,
                        address: document.getElementById('address').value,
                        province: document.getElementById('province').value,
                        postalCode: document.getElementById('postalCode').value
                    },
                    payment: document.querySelector('input[name="payment"]:checked').value,
                    notes: document.getElementById('notes').value,
                    items: cart.items,
                    total: cart.getTotal() + (cart.getTotal() >= 5000 ? 0 : 150),
                    orderDate: new Date().toISOString()
                };

                localStorage.setItem('lastOrder', JSON.stringify(orderData));
                cart.clearCart();
                window.location.href = 'order-success.html';
            }, 2000);
        });

        // 5. Floating Cart Update
        function updateFloatingCart() {
            const badge = document.getElementById('floatingCartBadge');
            const floatingCart = document.querySelector('.floating-cart');

            if (typeof cart !== 'undefined' && badge) {
                const count = cart.getItemCount();
                badge.textContent = count;

                if (count > 0) {
                    badge.style.display = 'flex';
                    floatingCart.classList.remove('empty-cart');
                } else {
                    badge.style.display = 'none';
                    // floatingCart.classList.add('empty-cart');
                }
            }
        }

        // 6. Override goToCart
        // ‡∏´‡∏ô‡πâ‡∏≤ Checkout ‡∏ñ‡πâ‡∏≤‡∏Å‡∏î‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤ ‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ cart.html ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡∏≠‡∏á
        window.goToCart = function() {
            window.location.href = 'cart.html';
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            renderOrderSummary();
        });
    </script>
</body>

</html>